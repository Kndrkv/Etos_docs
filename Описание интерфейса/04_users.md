# Пользователи

После выполнения первого входа под учетной записью (УЗ) администратора в целях безопасности рекомендуется сменить пароль. Для этого в верхней части окна Программы необходимо открыть вкладку «Настройки программы» и нажать кнопку «Пользователи» (рис.1).

<p align="center">
<img src="images/04_users_01.png"><br>
<i>Рисунок 1. Переход к настройке пользователей</i>
</p>
 
Открывшаяся форма (рис.2) условно разделена на три области:

- Панель поиска (выделена зеленым).
- Настройки учетной записи (выделена желтым).
- Права доступа пользователя (выделена красным).

<p align="center">
<img src="images/04_users_02.png"><br>
<i>Рисунок 2. Форма работы с пользователями</i>
</p>

Новый пароль нужно ввести в поля «Новый пароль» и «Подтверждение нового пароля», после чего нажать кнопку «Заменить пароль» (рис.3).

<p align="center">
<img src="images/04_users_03.png"><br>
<i>Рисунок 3. Смена пароля пользователя</i>
</p>

В случае соответствия пароля критериям сложности после нажатия кнопки «Заменить пароль» будет получено сообщение об успешной смене пароля (рис.4)

<p align="center">
<img src="images/04_users_04.png"><br>
<i>Рисунок 4. Смена пароля пользователя</i>
</p>

## Настройки УЗ пользователей

На рис.5 показана панель поиска со списком имеющихся УЗ. Воспользовавшись соответствующей кнопкой или применив текстовый фильтр, можно отразить все УЗ, последние 10 или ранее выбранные. УЗ будут отражены в виде списка (в данный момент в Программе только одна УЗ).

<p align="center">
<img src="images/04_users_05.png"><br>
<i>Рисунок 5. Область «Панель поиска»</i>
</p>

На рис.6 показана область настройки УЗ с меню формы (выделена цветом):

<p align="center">
<img src="images/04_users_06.png"><br>
<i>Рисунок 6. Область «Настройки учетной записи»</i>
</p>
 
Значение кнопок меню формы приведено в табл.1.

<table border="1">
<tr>
    <td align="center"><b>Вид кнопки</b></td>
    <td align="center"><b>Название</b></td>
    <td align="center"><b>Назначение</b></td>
    <td align="center"><b>«Горячие» клавиши</b></td>
</tr>
<tr>
    <td align="center"><img src="images/buttons/button_12.png"></td>
    <td>Показать панель поиска</td>
    <td>Отображает/скрывает панель поиска</td>
    <td>Ctrl+F</td>
</tr>
<tr>
    <td align="center"><img src="images/buttons/button_13.png"></td>
    <td>Создать новую запись</td>
    <td>Производиться очистка текущей формы и подготовка к внесению информации о новой УЗ</td>
    <td>Ctrl+N</td>
</tr>
<tr>
    <td align="center"><img src="images/buttons/button_01.png"></td>
    <td>Сохранить изменения</td>
    <td>Сохраняет изменения, сделанные в форме. Форма остается открытой</td>
    <td>Ctrl+S</td>
</tr>
<tr>
    <td align="center"><img src="images/buttons/button_14.png"></td>
    <td>Удалить запись</td>
    <td>Удаляет выбранную в панели поиска УЗ</td>
    <td></td>
</tr>
<tr>
    <td align="center"><img src="images/buttons/button_15.png"></td>
    <td>Информация о текущей записи</td>
    <td>Выводит подробную информацию о УЗ, выбранной в панели поиска</td>
    <td>Ctrl+I</td>
</tr>
<tr>
    <td align="center">><img src="images/buttons/button_02.png"></td>
    <td>Обновить форму</td>
    <td>Обновляет данные и перерисовывает форму. При этом информация считывается из базы данных, а значит, все несохраненные изменения будут потеряны</td>
    <td>Ctrl+R или F5</td>
</tr>
<tr>
    <td align="center"><img src="images/buttons/button_03.png"></td>
    <td>Перезагрузить форму</td>
    <td>Заново перезагружает форму и все данные в ней. Информация загружается из базы данных, все несохраненные изменения будут потеряны</td>
    <td>Ctrl+F5 или F6</td>
</tr>
<tr>
    <td align="center"><img src="images/buttons/button_16.png"></td>
    <td>Сформировать текстовый документ</td>
    <td>Формирует текстовый документ</td>
    <td>Ctrl+P</td>
</tr>
<tr>
    <td align="center"><img src="images/buttons/button_04.png"></td>
    <td>Сохранить изменения и закрыть форму</td>
    <td>Сохраняет сделанные в настройках УЗ изменения и закрывает форму</td>
    <td>Ctrl+E</td>
</tr>
</table>

<p align="center"><i>Таблица 1. Назначение кнопок меню формы</i></p>

## Создание новой УЗ пользователя

Для создания новой УЗ на панели меню нужно нажать кнопку ![](images/04_users_07.png) (Создать новую запись) или комбинацию Ctrl+N. Также для создания УЗ можно нажать ПКМ на панели поиска и в открывшемся меню выбрать пункт «Создать новую запись» (рис.7).

<p align="center">
<img src="images/04_users_08.png"><br>
<i>Рисунок 7. Создание УЗ с помощью контекстного меню</i>
</p>

В открывшемся окне (рис.8) нужно дважды ввести логин и пароль и нажать «Применить».

<p align="center">
<img src="images/04_users_09.png"><br>
<i>Рисунок 8. Ввод данных новой УЗ</i>
</p>

Созданная учетная запись появится в панели поиска (рис.9).

<p align="center">
<img src="images/04_users_10.png"><br>
<i>Рисунок 9. Новая УЗ</i>
</p>
 
Далее нужно выбрать созданную УЗ и ввести дополнительные сведения в ее настройках:

- ФИО физического лица, связанного с УЗ;
- номер пользователя (по умолчанию проставляется следующий по порядку, в нашем случае «002»);
- период действия пароля в днях (по умолчанию установлено значение «0» – неограниченно);
- срок действия пароля (задается дата окончания действия пароля).
  
Здесь же указывается информациия о наличии заключенного с пользователем договора (соглашения) о конфиденциальности и в выпадающем списке выбирается категория данных, к которой он имеет доступ: общедоступные данные, персональные данные, для служебного пользования, коммерческая тайна, государственная тайна (рис.10).

<p align="center">
<img src="images/04_users_11.png"><br>
<i>Рисунок 10. Данные о наличии доступа к конфиденциальной информации</i>
</p>

Также в настройках УЗ можно заблокировать пользователя, выставив флаг ![](images/buttons/flagon.png), или войти в систему с правами доступа выбранного пользователя, нажав кнопку «Залогиниться под этим пользователем» (рис.11).

<p align="center">
<img src="images/04_users_12.png"><br>
<i>Рисунок 11. Возможности управления УЗ</i>
</p>

В нижней части поля настроек УЗ можно привязать выбранную учетную запись к УЗ доменного пользователя. Для этого нужно нажать кнопку «Выбрать доменного пользователя» ( ![](images/04_users_13.png) ), в открывшемся окне (рис.12) выбрать нужного пользователя и нажать ![](images/04_users_14.png) (рис.13).

<p align="center">
<img src="images/04_users_15.png"><br>
<i>Рисунок 12. Поиск доменного пользовател</i>
</p>

<p align="center">
<img src="images/04_users_16.png"><br>
<i>Рисунок 13. Выбор доменного пользователя</i>
</p>

После этого для выбранного доменного пользователя будет доступен автоматический вход в Программу.

При нажатии ![](images/04_users_17.png) или комбинации Ctrl+I будет выведена дополнительная информация об УЗ, выбранной в панели поиска (рис.14).

<p align="center">
<img src="images/04_users_18.png"><br>
<i>Рисунок 14. Расширенная информация об активной УЗ</i>
</p>

## Права доступа

Вкладка «Права доступа» пользователя, расположенная в правой части формы, позволяет настроить права пользователя, выбранного в панели поиска.

Права доступа пользователя Программы определяеются бизнес-ролью. Структура бизнес-роли показана в табли.2.

<table border="1">
<tr>
    <td colspan="2" align="center"><b>Компонент</b></td>
    <td align="center"><b>Назначение/описание</b></td>
</tr>
<tr>
    <td rowspan="3">Бизнес-роль (БР)</td>
    <td>Группа прав доступа (ГПД)</td>
    <td>Устанавливает правда доступа к таблицам БД</td>
</tr>
<tr>
    <td>Профиль пользователя, рабочий стол (ПП)</td>
    <td>Определяет возможность доступа к формам, настройкам боковой панели</td>
</tr>
<tr>
    <td>Уровень доступа (УД)</td>
    <td>Определяет права доступа к определенным типам документов, а также к документам «по статусу»</td>
</tr>
</table>

<p align="center"><i>Таблица 2. Компоненты разграничения прав доступа</i></p>

Как видно из таблицы, бизнес-роль объединяет в себе три компонента разграничения доступа. Допускается, однако, отдельно присваивать пользователю ГПД, ПП и УД. При этом, если пользователю присвоена бизнес-роль, права, ассоциированные с отдельно выбранными ГПД, ПП и УД, игнорируются.

Подробно настройки прав доступа описаны в соответствующих разделах:

- [Настройка бизнес-ролей](05_business_roles.md).
- [Группа прав доступа](09_access.md).
- [Профили пользователей](06_user_profiles.md).

Помимо основной, каждому пользователю могут быть присвоены дополнительные бизнес-роли. Для этого в области прав доступа рядом с полем «Дополнительные бизнес-роли пользователя» нужно нажать кнопку ![](images/buttons/button_13.png) («Добавить бизнес-роль пользователю») или кликнуть в пустой области ПКМ и выбрать соответствующий пункт меню (рис.15).

<p align="center">
<img src="images/04_users_19.png"><br>
<i>Рисунок 15. Добавление дополнительной бизнес-роли</i>
</p>
 
Далее в открывшемся окне (рис.16) требуется выбрать бизнес-роль и нажать ![](images/04_users_20.png) («Завершить поиск с выбранным результатом»).

<p align="center">
<img src="images/04_users_21.png"><br>
<i>Рисунок 16. Выбор дополнительной бизнес-роли пользователя</i>
</p>

## Вкладка «Свойства»

Область прав доступа также содержит вкладку «Свойства» (рис.17), где пользователю можно задать дополнительные права доступа, не включенные в бизнес-роли.

<p align="center">
<img src="images/04_users_22.png"><br>
<i>Рисунок 17. Вкладка «Свойства» области прав доступа</i>
</p>

В верхней части вкладки размещено меню, описание которого приведено в табл.3.

<table border="1">
<tr>
    <td align="center"><b>Вид кнопки</b></td>
    <td align="center"><b>Название</b></td>
    <td align="center"><b>Назначение</b></td>
</tr>
<tr>
    <td align="center"><img src="images/buttons/button_04.png"></td>
    <td>Применить изменения настроек</td>
    <td>Внесенные изменения будут сохранены в памяти Программы. Для сохранения изменений в БД нужно нажать кнопку «Сохранить изменения» в меню формы</td>
</tr>
<tr>
    <td align="center"><img src="images/buttons/button_06.png"></td>
    <td>Показать заполненные свойства</td>
    <td>Выполняется переключение между режимами отображения свойств: только заполненные/все свойства</td>
</tr>
<tr>
    <td align="center"><img src="images/buttons/button_07.png"></td>
    <td>Раскрыть все свойства</td>
    <td>Выполняется раскрытие списка всех свойств. При повторном нажатии список будет свернут</td>
</tr>
</table>

<p align="center"><i>Таблица 3. Назначение кнопок меню вкладки «Свойства»</i></p>

Свойства прав доступа вкладки разделены на группы «Режим» и «Настройка». Группа «Режим» включает в себя подгруппу для настройки сервиса обмена заключениями с негосударственными экспертизами. Для включения этой опции нужно выстановить флаг ![](images/buttons/flagon.png) напротив пункта «Разрешить подключение к удаленному провайдеру» и в появившемся списке настроек указать адрес подключения к провайдеру, а также логин и пароль (рис.18).

<p align="center">
<img src="images/04_users_23.png"><br>
<i>Рисунок 18. Настройки сервиса обмена заключениями с негосударственными экспертизами</i>
</p>